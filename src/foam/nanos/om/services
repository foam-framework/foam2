p({
  "class": "foam.nanos.boot.NSpec",
  "name": "OMLogger",
  "serviceClass": "foam.nanos.om.OMLogger"
})

p({
  "class": "foam.nanos.boot.NSpec",
  "name": "om1minDAO",
  "serve": true,
  "serviceScript": """
    return new foam.dao.EasyDAO.Builder(x)
      .setCluster(false)
      .setPm(true)
      .setPipelinePm(true)
      .setJournalType(foam.dao.JournalType.SINGLE_JOURNAL)
      .setJournalName("OMMinutely")
      .setOf(foam.nanos.analytics.Candlestick.getOwnClassInfo())
      .setDecorator(new foam.nanos.alarming.AlarmingUniqueNameDAO.Builder(x).setDelegate(new foam.dao.NullDAO.Builder(x).setOf(foam.nanos.analytics.Candlestick.getOwnClassInfo()).build()).build())
      .setCluster(false)
      .setRuler(false)
      .setWriteOnly(true)
      .build();
  """,
  "client": """
    {
      "of":"foam.nanos.analytics.Candlestick"
    }
  """
})

p({
  "class": "foam.nanos.boot.NSpec",
  "name": "omHourlyDAO",
  "serve": true,
  "serviceScript": """
    return new foam.dao.EasyDAO.Builder(x)
      .setPm(false)
      .setPipelinePm(false)
      .setOf(foam.nanos.analytics.Candlestick.getOwnClassInfo())
      .setJournalType(foam.dao.JournalType.SINGLE_JOURNAL)
      .setJournalName("OMDAILY")
      .setCluster(false)
      .setWriteOnly(true)
      .build();
  """,
  "client": "{\"of\":\"foam.nanos.analytics.Candlestick\"}"
})
p({
  "class": "foam.nanos.boot.NSpec",
  "name": "omDailyDAO",
  "serve": true,
  "serviceScript": """
    return new foam.dao.EasyDAO.Builder(x)
      .setPm(false)
      .setPipelinePm(false)
      .setOf(foam.nanos.analytics.Candlestick.getOwnClassInfo())
      .setJournalType(foam.dao.JournalType.SINGLE_JOURNAL)
      .setJournalName("OMDAILY")
      .setCluster(false)
      .setOf(foam.nanos.analytics.Candlestick.getOwnClassInfo())
      .setWriteOnly(true)
      .build();
  """,
  "client": "{\"of\":\"foam.nanos.analytics.Candlestick\"}"
})
p({
  "class": "foam.nanos.boot.NSpec",
  "name": "omHourlyReduceManager",
  "serve": true,
  "serviceScript": """
    return new foam.nanos.analytics.DAOReduceManager.Builder(x)
      .setSourceDAO((foam.dao.DAO) x.get("om1minDAO"))
      .setDestDAO((foam.dao.DAO) x.get("omHourlyDAO"))
      .setPeriodLengthMs(60*60*1000)
      .build();
  """
})
p({
  "class": "foam.nanos.boot.NSpec",
  "name": "omDailyReduceManager",
  "serve": true,
  "serviceScript": """
    return new foam.nanos.analytics.DAOReduceManager.Builder(x)
      .setSourceDAO((foam.dao.DAO) x.get("omHourlyDAO"))
      .setDestDAO((foam.dao.DAO) x.get("omDailyDAO"))
      .setPeriodLengthMs(24*60*60*1000)
      .build();
  """
})
p({
  "class": "foam.nanos.boot.NSpec",
  "name": "omFoldManager",
  "serve": true,
  "serviceScript": """
    return new foam.nanos.analytics.DAOFoldManager.Builder(x)
      .setDao((foam.dao.DAO) x.get("om1minDAO"))
      .setPeriodLengthMs(60*1000)
      .build();
  """
})
